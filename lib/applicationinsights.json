{
  "connectionString": "${file:/mnt/secrets/darts/app-insights-connection-string}",
  "role": {
    "name": "DARTS Gateway"
  },
  "customDimensions": {
    "environment": "local-dev",
    "environment": "${env:ENVIRONMENT_NAME}"
  },
  "sampling": {
    "overrides": [
      {
        "telemetryType": "request",
        "attributes": [
          {
            "key": "http.url",
            "value": "https?://[^/]+/health.*",
            "matchType": "regexp"
          }
        ],
        "percentage": 1
      }
    ]
  },
  "processors": [
    {
      "type": "attribute",
      "include": {
        "matchType": "strict",
        "spanNames": [
          "GET",
          "SET",
          "PEXPIRE"
        ]
      },
      "actions": [
        {
          "key": "test-key",
          "value": "tracked",
          "action": "insert"
        },
        {
          "key": "data",
          "pattern": "darts-gateway-token-service:.*",
          "replace": "darts-gateway-token-service: REDACTED",
          "action": "mask"
        }
      ]
    }
  ]
}
